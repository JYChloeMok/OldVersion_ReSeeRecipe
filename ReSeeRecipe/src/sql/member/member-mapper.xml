<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<comment>회원관련 SQL문</comment>
	
	<entry key="loginMember">
		SELECT
		       MEM_NO,
		       MEM_ID,
		       MEM_PWD,
		       MEM_NAME,
		       MEM_NICKNAME,
		       MEM_EMAIL,
		       MEM_STATUS,
		       ENROLL_DATE,
		       MODIFY_DATE,
		       DELETE_DATE,
		       MEM_PICTURE,
		       MEM_GRADE
		  FROM
		       TB_MEMBER
		 WHERE
		       MEM_ID = ?
		   AND
		       MEM_PWD = ?
		   AND
		       MEM_STATUS = 'Y'
	</entry>
	
	<entry key="selectMemlistCount">
		SELECT
				COUNT(*)
		 FROM
		 		TB_MEMBER
		WHERE
				MEM_STATUS = 'Y'
		  AND
		  		MEM_GRADE != 4
	</entry>
	
	<entry key="selectMemberAll">
		SELECT *
		 FROM(SELECT ROWNUM RNUM, A.* 
				 FROM (SELECT 
				 			MEM_NO
				 		   ,MEM_NAME
				 		   ,MEM_NICKNAME
				 		   ,MEM_ID
				 		   ,MEM_EMAIL
				 		   ,ENROLL_DATE
				 		   ,MEM_GRADE_NAME
					 FROM 	
					 		TB_MEMBER
					 JOIN 
					 		TB_MEMBER_GRADE ON(MEM_GRADE = MEM_GRADE_NO)
					WHERE 
							MEM_GRADE != 4
					 AND
					 		MEM_STATUS = 'Y'
					ORDER 
					   BY 
					   		MEM_NO DESC) A)
				WHERE RNUM BETWEEN ? AND ?					   		
	</entry>
	
	<entry key="selectMemInfo">
		SELECT
				MEM_NO
			   ,MEM_NAME
			   ,MEM_ID
			   ,MEM_NICKNAME
			   ,MEM_EMAIL
			   ,ENROLL_DATE
			   ,MEM_GRADE_NAME
	     FROM
	     		TB_MEMBER
	     JOIN
	     		TB_MEMBER_GRADE ON(MEM_GRADE = MEM_GRADE_NO)
	     WHERE
	     		MEM_NO = ?
	       AND
	       		MEM_STATUS = 'Y'
	</entry>
	
	<entry key="updateMemInfo">
		UPDATE
		   		TB_MEMBER
		   SET
		   		(
				MEM_NAME
			   ,MEM_NICKNAME
			   ,MEM_EMAIL
			   ,MODIFY_DATE
			   ,MEM_GRADE
				)
		VALUES
				(
				?
			   ,?
			   ,?
			   ,SYSDATE
			   ,(SELECT MEM_GRADE_NO
                    FROM TB_MEMBER_GRADE
                    WHERE MEM_GRADE_NAME LIKE '%'||?||'%'))
	    WHERE
	    		MEM_NO = ?
	</entry>
</properties>